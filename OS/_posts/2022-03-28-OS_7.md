---
layout: post
title: OS - 7
categories: OS
tags: [CS, OS]
---

# OS - 7

{:toc}

### Scheduling Policy

##### Scheduling Criteria

- CPU utilization, Keep CPU as busy as possible
- Throughput, 특정 시간동안 실행을 끝낼 수 있는 프로세스의 수
- Turnaround Time, 요청 후 종료까지의 시간
- Waiting Time, Ready큐 대기 시간
- Response Time, 프로세스에 응답하는 시간

### FCFS

- First Come, First Served
- FIFO와 동일
- 먼저 온 프로세스 순서대로 Blocked까지 실행
  - Problem, CPU 독점
  - Solution, time slice를 통해 시간 분배

##### Problem in FCFS

- 들어오는 순서에 따라서 Waiting Time 변화가 큼
- 실행시간이 긴 프로세스가 먼저 오는 경우 평균 대기시간 증가
- 짧은 프로세스 뒤에 긴 프로세스가 오는 경우 평균 대기시간 감소
  - Convoy Effect

### SJF

- Shortest Job First
- FCFS가 실행시간이 긴 놈이 먼저 와서 느려진다면 짧은 애를 먼저 보내면 어떨까?
- CPU Burst의 길이를 기준으로 짧은 애들을 먼저 처리
- Waiting Time 기준으로는 **Optimal**
- 정확한 CPU Burst 시간을 길이를 **예측할 수 없음**

##### Preemptive, Non-Preemptive SJF

- Preemptive
  - 양보 가능
  - CPU Burst가 끝나지 않아도 CPU를 나올 수 있음
- Non-Preemptive
  - 양보 불가능
  - CPU Burst가 끝나기 전까지 CPU를 독점

##### How to Know CPU Burst?

- Exponential averaging
- 과거의 CPU Burst Time을 통해 예측
- 예측값 = a\*(직전 실제 값) + (1 - a)(직전 예측 값)
- a가 0이면 예측값만 쓰고, 1이면 실제값만 쓴다는 의미
- a값을 구할 수 없기에 이론적인 Concept 뿐

### RR

- Round Robin
- 특정 시간만큼 CPU를 점유하는 FCFS
- 특정한 time quantum만큼 CPU를 차지하고 ready queue 끝으로 들어감
- q가 클수록 FCFS와 비슷, q가 작을수록 SJF와 동일해지나 Context Switch Overhead가 커짐
- q는 보통 10ms ~ 100ms, context switch < 10마이크로초

##### Problem in RR

1. 비슷한 CPU Burst로 이뤄져 있는 경우 FCFS보다 Waiting Time이 엄청나게 늘어남
   - n개의 프로세스가 있을 때 최대 대기시간은 (n - 1)\*q
   - 공평하지만 비효율적
2. I/O Bound Process가 있는 경우, Time Quantum 보다 CPU Burst가 작은 경우
   - 계속해서 CPU에 올라가 I/O를 잘 사용하지 못하는 상황 발생
   - CPU Burst가 끝나도 Time이 남아있어 CPU가 노는 상황 발생
   - CPU Bound에는 q를 크게, I/O Bound에는 q를 작게하는 Adaptive Policy 필요

### Priority Scheduling

- 각 프로세스마다 우선순위를 줌
- Preemptive, Non-preemptive로 구성 가능

##### Problem in Priority Scheduling

- 우선순위가 낮은 경우에는 아에 실행되지 않는 프로세스 발생 가능 = Starvation
- 대기 시간이 길어지면 우선순위를 높여주는 Aging을 활용

### Multi-Level Queue

- Ready Queue를 2가지로 분할
- Interactive(I/O Bound), Batch(CPU Bound)로 프로세스를 구분
- foreground, background 큐마다 다른 Policy를 적용
- Adaptive한 방식
- 어떤 큐에 들어가야하는 지 결정하기 어려움

### Multi-Level Feedback Queue
